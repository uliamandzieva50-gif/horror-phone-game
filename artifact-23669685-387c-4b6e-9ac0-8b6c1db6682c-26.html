
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
							<style>
								body {
									background-color: white; /* Ensure the iframe has a white background */
								}

								
  body {
    background: #000;
    color: #0f0;
    font-family: 'Courier New', monospace;
    margin: 0; height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #phone {
    background: #111;
    border: 2px solid #0f0;
    border-radius: 20px;
    width: 95%;
    max-width: 400px;
    height: 90vh;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    box-shadow: 0 0 15px #0f0;
  }
  #screen {
    background: #000;
    border: 1px solid #0f0;
    flex: 1;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
    overflow-y: auto;
    white-space: pre-wrap;
    font-size: 16px;
  }
  #numberContainer {
    margin-bottom: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #number {
    font-size: 28px;
    padding: 10px;
    border-radius: 10px;
    border: 2px solid #0f0;
    background: #111;
    color: #0f0;
    outline: none;
    text-align: center;
    width: 100%;
    max-width: 300px;
    box-sizing: border-box;
    letter-spacing: 4px;
  }
  #keypad {
    margin-top: 10px;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    max-width: 300px;
  }
  .key {
    background: #0f0;
    color: #000;
    font-size: 24px;
    border-radius: 10px;
    padding: 15px 0;
    text-align: center;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.2s;
  }
  .key:hover {
    background: #afa;
  }
  .key:active {
    background: #5a5;
  }
  textarea {
    width: 100%;
    height: 80px;
    background: #111;
    color: #0f0;
    border: 2px solid #0f0;
    border-radius: 10px;
    padding: 10px;
    font-family: monospace;
    font-size: 16px;
    margin-bottom: 10px;
    outline: none;
    box-sizing: border-box;
  }
  #inputButtons {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
  }
  button {
    font-size: 20px;
    padding: 15px;
    border: none;
    border-radius: 15px;
    background: #0f0;
    color: #000;
    cursor: pointer;
    transition: background-color 0.3s;
    margin-bottom: 10px;
  }
  button:hover, button:active {
    background: #afa;
  }
  button:disabled {
    background: #050;
    cursor: not-allowed;
  }
  .hidden {
    display: none;
  }


							</style>
                        </head>
                        <body>
                            <!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–•–æ—Ä—Ä–æ—Ä –¢–µ–ª–µ—Ñ–æ–Ω ‚Äî –ù–∞–±–æ—Ä –∫–Ω–æ–ø–∫–∞–º–∏, —Ç–µ–∫—Å—Ç –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω</title>
<style>
  body {
    background: #000;
    color: #0f0;
    font-family: 'Courier New', monospace;
    margin: 0; height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #phone {
    background: #111;
    border: 2px solid #0f0;
    border-radius: 20px;
    width: 95%;
    max-width: 400px;
    height: 90vh;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    box-shadow: 0 0 15px #0f0;
  }
  #screen {
    background: #000;
    border: 1px solid #0f0;
    flex: 1;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
    overflow-y: auto;
    white-space: pre-wrap;
    font-size: 16px;
  }
  #numberContainer {
    margin-bottom: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #number {
    font-size: 28px;
    padding: 10px;
    border-radius: 10px;
    border: 2px solid #0f0;
    background: #111;
    color: #0f0;
    outline: none;
    text-align: center;
    width: 100%;
    max-width: 300px;
    box-sizing: border-box;
    letter-spacing: 4px;
  }
  #keypad {
    margin-top: 10px;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    max-width: 300px;
  }
  .key {
    background: #0f0;
    color: #000;
    font-size: 24px;
    border-radius: 10px;
    padding: 15px 0;
    text-align: center;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.2s;
  }
  .key:hover {
    background: #afa;
  }
  .key:active {
    background: #5a5;
  }
  textarea {
    width: 100%;
    height: 80px;
    background: #111;
    color: #0f0;
    border: 2px solid #0f0;
    border-radius: 10px;
    padding: 10px;
    font-family: monospace;
    font-size: 16px;
    margin-bottom: 10px;
    outline: none;
    box-sizing: border-box;
  }
  #inputButtons {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
  }
  button {
    font-size: 20px;
    padding: 15px;
    border: none;
    border-radius: 15px;
    background: #0f0;
    color: #000;
    cursor: pointer;
    transition: background-color 0.3s;
    margin-bottom: 10px;
  }
  button:hover, button:active {
    background: #afa;
  }
  button:disabled {
    background: #050;
    cursor: not-allowed;
  }
  .hidden {
    display: none;
  }
</style>
</head>
<body>

<div id="phone">
  <div id="screen">–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ü–æ–∑–≤–æ–Ω–∏—Ç—å¬ª. –ú–æ–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –∫–Ω–æ–ø–∫–∞–º–∏ –∏–ª–∏ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã. –ü–æ—Å–ª–µ –∑–≤–æ–Ω–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—Å—Ç –∏–ª–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω.</div>
  
  <div id="numberContainer">
    <input id="number" type="text" placeholder="–ù–æ–º–µ—Ä" maxlength="15" autocomplete="off" />
    <div id="keypad">
      <div class="key">1</div>
      <div class="key">2</div>
      <div class="key">3</div>
      <div class="key">4</div>
      <div class="key">5</div>
      <div class="key">6</div>
      <div class="key">7</div>
      <div class="key">8</div>
      <div class="key">9</div>
      <div class="key">‚Üê</div>
      <div class="key">0</div>
      <div class="key">C</div>
    </div>
  </div>

  <button id="callBtn">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</button>
  <button id="hangupBtn" class="hidden">üì¥ –ü–æ–≤–µ—Å–∏—Ç—å —Ç—Ä—É–±–∫—É</button>
  
  <div id="chatContainer" class="hidden">
    <textarea id="userInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω..."></textarea>
    <div id="inputButtons">
      <button id="voiceInputBtn">üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥</button>
      <button id="sendBtn">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>
  </div>
</div>

<script>
  const screenDiv = document.getElementById('screen');
  const numberInput = document.getElementById('number');
  const keypad = document.getElementById('keypad');
  const callBtn = document.getElementById('callBtn');
  const hangupBtn = document.getElementById('hangupBtn');
  const chatContainer = document.getElementById('chatContainer');
  const userInput = document.getElementById('userInput');
  const sendBtn = document.getElementById('sendBtn');
  const voiceInputBtn = document.getElementById('voiceInputBtn');

  let state = 'idle';
  let currentNumber = '';
  let recognition = null;
  let listening = false;

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
  keypad.addEventListener('click', e => {
    if (!e.target.classList.contains('key')) return;
    if (state !== 'idle') return;

    const key = e.target.textContent;
    let val = numberInput.value;

    if (key === 'C') {
      numberInput.value = '';
    } else if (key === '‚Üê') {
      numberInput.value = val.slice(0, -1);
    } else if (val.length < 15) {
      numberInput.value += key;
    }
  });

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —ç–∫—Ä–∞–Ω
  function log(text) {
    screenDiv.innerHTML += '<br>' + text;
    screenDiv.scrollTop = screenDiv.scrollHeight;
  }

  // –§—É–Ω–∫—Ü–∏—è –æ–∑–≤—É—á–∫–∏ —Ç–µ–∫—Å—Ç–∞
  function speak(text, opts = {}) {
    if (!window.speechSynthesis) return;
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'ru-RU';
    utterance.rate = opts.rate || 0.8;
    utterance.pitch = opts.pitch || 0.6;
    utterance.volume = opts.volume || 1;
    window.speechSynthesis.speak(utterance);
    log('<b>' + (opts.speaker || '–ò–ò') + ' –≥–æ–≤–æ—Ä–∏—Ç:</b> ' + text);
  }

  // –ë–∞–∑–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ –∏ –æ—Ç–≤–µ—Ç–∞–º–∏
  const characters = {
    '911': {
      name: '–î–∏—Å–ø–µ—Ç—á–µ—Ä –ø–æ–ª–∏—Ü–∏–∏',
      intro: '–î–∏—Å–ø–µ—Ç—á–µ—Ä –ø–æ–ª–∏—Ü–∏–∏. –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?',
      responses: [
        { keywords: ['–ø–æ–º–æ–≥–∏—Ç–µ', '—É–±–∏–π—Å—Ç–≤–æ', '–æ–ø–∞—Å–Ω–æ—Å—Ç—å', '—É–∫—Ä–∞–ª–∏', '–≤–æ—Ä', '–ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ', '—Ç–µ–ª–µ—Ñ–æ–Ω', '–∫—Ä–∞–∂–∞', '–æ–≥—Ä–∞–±–∏–ª–∏', '–ø–æ—Ö–∏—Ç–∏–ª–∏', '–≤–∑—è–ª–∏', '—É–∫—Ä–∞–ª–∏ —Å–æ–±–∞–∫—É', '—É–∫—Ä–∞–ª–∏ –∫–æ—Ç–∞', '—É–∫—Ä–∞–ª–∏ —Å—É–º–∫—É', '—É–∫—Ä–∞–ª–∏ –¥–µ–Ω—å–≥–∏', '—É–∫—Ä–∞–ª–∏ –≤–µ–ª–æ—Å–∏–ø–µ–¥', '—É–∫—Ä–∞–ª–∏ –º–∞—à–∏–Ω—É', '–≤–∑—è–ª–∏ —é–±–∫—É', '—É–∫—Ä–∞–ª–∏ —Å—É–º–∫—É', '–≤–∑—è–ª–∏ –±–æ—Ç–∏–Ω–∫–∏', '—É–∫—Ä–∞–ª–∏ –∫–ª—é—á–∏', '–ø–æ—Ö–∏—Ç–∏–ª–∏ —á–µ–ª–æ–≤–µ–∫–∞', '–≤—ã–∫—É–ø', '–≥—É–±—ã –±—Ä–∞—Ç–∞ —É–∫—Ä–∞–ª–∏', '—Ç—Ä–µ–±—É—é—Ç –≤—ã–∫—É–ø', '–≤–µ—Ä–Ω—É—Ç—å –±—Ä–∞—Ç–∞', '–ø–æ—Ö–∏—Ç–∏–ª–∏ –±—Ä–∞—Ç–∞', '–º–æ–∏ –≥—É–±—ã –±—Ä–∞—Ç–∞ —É–∫—Ä–∞–ª–∏'], 
          reply: '–ú—ã —É–∂–µ –≤—ã–µ–∑–∂–∞–µ–º. –û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –Ω–∞ –º–µ—Å—Ç–µ.' },
        { keywords: ['—à—É—Ç–∫–∞', '–æ—Ç–º–µ–Ω–∞', '–Ω–∏—á–µ–≥–æ'], 
          reply: '–•–æ—Ä–æ—à–æ, –≤—ã–∑–æ–≤ –æ—Ç–º–µ–Ω—ë–Ω. –î–æ —Å–≤–∏–¥–∞–Ω–∏—è.', hangup: true },
        { keywords: ['–ø–æ–∂–∞—Ä', '–≥–æ—Ä–∏—Ç', '–æ–≥–æ–Ω—å'], 
          reply: '–ü–æ–∂–∞—Ä–Ω–∞—è —Å–ª—É–∂–±–∞ —É–∂–µ –≤ –ø—É—Ç–∏.' },
        { keywords: ['–∞–≤–∞—Ä–∏—è', '—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç', '–¥—Ç–ø'], 
          reply: '–°–∫–æ—Ä–∞—è –ø–æ–º–æ—â—å –≤—ã–µ—Ö–∞–ª–∞.' },
        { keywords: ['–Ω–∞—Å–∏–ª–∏–µ', '–¥—Ä–∞–∫–∞', '–ø—Ä–∏–∑—ã–≤'], 
          reply: '–ú—ã –Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –ø–∞—Ç—Ä—É–ª—å.' }
      ],
      defaultReply: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ.'
    },
    '666': {
      name: '–ì–æ–ª–æ—Å –∏–∑ –ø—Ä–µ–∏—Å–ø–æ–¥–Ω–µ–π',
      intro: '–¢—ã –ø–æ–∑–≤–æ–Ω–∏–ª –≤ –∞–¥...',
      responses: [
        { keywords: ['—Ç—ã', '–≥–¥–µ', '–∫—Ç–æ'], 
          reply: '–¢—ã –≤ –∞–¥—É. –ú—ã —É–∂–µ —Ä—è–¥–æ–º...', pitch: 0.4 },
        { keywords: ['–ø–æ–º–æ–≥–∏—Ç–µ', '—Å–ø–∞—Å—Ç–∏'], 
          reply: '–ù–∏–∫—Ç–æ –Ω–µ —É—Å–ª—ã—à–∏—Ç —Ç–≤–æ–π –∫—Ä–∏–∫...', pitch: 0.3 },
        { keywords: ['–≤—ã—Ö–æ–¥', '—Å–ø–∞—Å—Ç–∏'], 
          reply: '–í—ã—Ö–æ–¥–∞ –Ω–µ—Ç...', pitch: 0.2 },
        { keywords: ['–ø—Ä–∏–≤–µ—Ç'], 
          reply: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≤–µ—á–Ω–æ—Å—Ç—å...', pitch: 0.5 }
      ],
      defaultReply: '–¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª...', pitch: 0.3
    },
    '123': {
      name: '–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏',
      intro: '–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.',
      responses: [
        { keywords: ['–ø—Ä–æ–±–ª–µ–º–∞', '–æ—à–∏–±–∫–∞', '—Å–±–æ–π', '–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç', '–≤–∏—Ä—É—Å', '—Ö–∞–∫–∏–Ω–≥', '–∫–æ–º–ø—å—é—Ç–µ—Ä —Å–ª–æ–º–∞–ª—Å—è', '–∏–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–µ –ø–æ—à–µ–ª', '—Ç–µ–ª–µ—Ñ–æ–Ω –∑–∞–≤–∏—Å', '–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä—è–ª'], 
          reply: '–û–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ.' },
        { keywords: ['–ø–æ–º–æ–≥–∏—Ç–µ', '–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç'], 
          reply: '–ú—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ —ç—Ç–∏–º.' },
        { keywords: ['—Å–ø–∞—Å–∏–±–æ', '–±–ª–∞–≥–æ–¥–∞—Ä—é'], 
          reply: '–†–∞–¥—ã –ø–æ–º–æ—á—å!' }
      ],
      defaultReply: '–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –ø–æ–Ω—è–ª.'
    },
    '555': {
      name: '–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –≥–æ–ª–æ—Å',
      intro: '–¢—ã —É—Å–ª—ã—à–∞–ª —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≥–æ–ª–æ—Å...',
      responses: [
        { keywords: ['–ø—Ä–∏–≤–µ—Ç', '–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π'], 
          reply: '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è, —Å—Ç—Ä–∞–Ω–Ω–∏–∫.' },
        { keywords: ['—Ç–∞–π–Ω–∞', '—Å–µ–∫—Ä–µ—Ç'], 
          reply: '–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–π–Ω—ã –ª—É—á—à–µ –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å.' },
        { keywords: ['—Å—Ç—Ä–∞—Ö', '—É–∂–∞—Å'], 
          reply: '–°—Ç—Ä–∞—Ö ‚Äî –ª–∏—à—å —Ç–µ–Ω—å –≤ —Ç–≤–æ—ë–º —Ä–∞–∑—É–º–µ.' },
        { keywords: ['–ø–æ–º–æ–≥–∏—Ç–µ'], 
          reply: '–Ø –º–æ–≥—É –ª–∏—à—å –Ω–∞–±–ª—é–¥–∞—Ç—å.' }
      ],
      defaultReply: '–ú–æ–ª—á–∞–Ω–∏–µ ‚Äî —Ç–æ–∂–µ –æ—Ç–≤–µ—Ç.'
    },
    '000': {
      name: '–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫',
      intro: '–û—Å—Ç–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.',
      responses: [],
      defaultReply: '–ë–∏–ø... –ë–∏–ø...'
    }
  };

  // –ò—â–µ–º –æ—Ç–≤–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
  function findResponse(character, userText) {
    userText = userText.toLowerCase();
    for (const resp of character.responses) {
      for (const kw of resp.keywords) {
        if (userText.includes(kw)) {
          return resp;
        }
      }
    }
    return null;
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
  voiceInputBtn.onclick = () => {
    if (listening) {
      stopVoiceInput();
      return;
    }

    if (!('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) || !(window.AudioContext || window.webkitAudioContext)) {
      log('–ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥.');
      return;
    }

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SpeechRecognition();
    recognition.lang = 'ru-RU';
    recognition.continuous = false;
    recognition.interimResults = false;

    recognition.onstart = () => {
      listening = true;
      voiceInputBtn.textContent = '‚èπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω';
      voiceInputBtn.style.background = '#daa';
      log('üé§ –°–ª—É—à–∞—é...');
    };

    recognition.onresult = (event) => {
      const transcript = event.results[0][0].transcript;
      if (transcript.trim()) {
        userInput.value += transcript + ' ';
        log('–†–∞—Å–ø–æ–∑–Ω–∞–Ω–æ: ' + transcript);
      }
    };

    recognition.onerror = (event) => {
      log('–û—à–∏–±–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞: ' + event.error);
      stopVoiceInput();
    };

    recognition.onend = () => {
      stopVoiceInput();
    };

    try {
      navigator.mediaDevices.getUserMedia({ audio: true }).then(() => {
        recognition.start();
      }).catch((err) => {
        log('–î–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω. –†–∞–∑—Ä–µ—à–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞.');
      });
    } catch (err) {
      recognition.start();
    }
  };

  function stopVoiceInput() {
    listening = false;
    voiceInputBtn.textContent = 'üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥';
    voiceInputBtn.style.background = '';
    if (recognition) {
      recognition.stop();
    }
  }

  callBtn.onclick = async () => {
    if (state !== 'idle') return;

    currentNumber = numberInput.value.trim();
    if (!currentNumber) {
      alert('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä!');
      return;
    }

    state = 'calling';

    callBtn.classList.add('hidden');
    hangupBtn.classList.remove('hidden');
    chatContainer.classList.remove('hidden');
    numberInput.disabled = true;
    screenDiv.innerHTML = '<b>–ó–≤–æ–Ω–∏–º –Ω–∞ ' + currentNumber + '...</b>';
    log('–°–≤—è–∑—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –ü–∏—à–∏—Ç–µ –∏–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç–µ.');

    await new Promise(r => setTimeout(r, 1500));

    const character = characters[currentNumber];
    if (character) {
      speak(character.intro, { speaker: character.name, pitch: 0.6 });
    } else {
      speak('–ê–±–æ–Ω–µ–Ω—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∏–ª–∏ –Ω–æ–º–µ—Ä –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.', { speaker: '–°–∏—Å—Ç–µ–º–∞' });
    }
  };

  sendBtn.onclick = () => {
    if (state !== 'calling' || listening) return;

    const userMessage = userInput.value.trim();
    if (!userMessage) {
      alert('–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!');
      return;
    }

    log('<b>–í—ã:</b> ' + userMessage);
    userInput.value = '';

    const character = characters[currentNumber];
    if (!character) {
      speak('–ê–±–æ–Ω–µ–Ω—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç.', { speaker: '–°–∏—Å—Ç–µ–º–∞' });
      return;
    }

    const response = findResponse(character, userMessage);
    if (response) {
      speak(response.reply, { speaker: character.name, pitch: response.pitch || 0.6 });
      if (response.hangup) {
        setTimeout(() => hangupBtn.click(), 3000);
      }
    } else {
      speak(character.defaultReply, { speaker: character.name, pitch: character.pitch || 0.6 });
    }
  };

  hangupBtn.onclick = () => {
    if (state === 'idle') return;

    stopVoiceInput();

    state = 'idle';
    currentNumber = '';
    callBtn.classList.remove('hidden');
    hangupBtn.classList.add('hidden');
    chatContainer.classList.add('hidden');
    numberInput.disabled = false;
    userInput.value = '';
    log('<b>–í—ã–∑–æ–≤ –∑–∞–≤–µ—Ä—à—ë–Ω.</b>');
  };
</script>

</body>
</html>



							<script>
                            	
  const screenDiv = document.getElementById('screen');
  const numberInput = document.getElementById('number');
  const keypad = document.getElementById('keypad');
  const callBtn = document.getElementById('callBtn');
  const hangupBtn = document.getElementById('hangupBtn');
  const chatContainer = document.getElementById('chatContainer');
  const userInput = document.getElementById('userInput');
  const sendBtn = document.getElementById('sendBtn');
  const voiceInputBtn = document.getElementById('voiceInputBtn');

  let state = 'idle';
  let currentNumber = '';
  let recognition = null;
  let listening = false;

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
  keypad.addEventListener('click', e => {
    if (!e.target.classList.contains('key')) return;
    if (state !== 'idle') return;

    const key = e.target.textContent;
    let val = numberInput.value;

    if (key === 'C') {
      numberInput.value = '';
    } else if (key === '‚Üê') {
      numberInput.value = val.slice(0, -1);
    } else if (val.length < 15) {
      numberInput.value += key;
    }
  });

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —ç–∫—Ä–∞–Ω
  function log(text) {
    screenDiv.innerHTML += '<br>' + text;
    screenDiv.scrollTop = screenDiv.scrollHeight;
  }

  // –§—É–Ω–∫—Ü–∏—è –æ–∑–≤—É—á–∫–∏ —Ç–µ–∫—Å—Ç–∞
  function speak(text, opts = {}) {
    if (!window.speechSynthesis) return;
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'ru-RU';
    utterance.rate = opts.rate || 0.8;
    utterance.pitch = opts.pitch || 0.6;
    utterance.volume = opts.volume || 1;
    window.speechSynthesis.speak(utterance);
    log('<b>' + (opts.speaker || '–ò–ò') + ' –≥–æ–≤–æ—Ä–∏—Ç:</b> ' + text);
  }

  // –ë–∞–∑–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ –∏ –æ—Ç–≤–µ—Ç–∞–º–∏
  const characters = {
    '911': {
      name: '–î–∏—Å–ø–µ—Ç—á–µ—Ä –ø–æ–ª–∏—Ü–∏–∏',
      intro: '–î–∏—Å–ø–µ—Ç—á–µ—Ä –ø–æ–ª–∏—Ü–∏–∏. –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?',
      responses: [
        { keywords: ['–ø–æ–º–æ–≥–∏—Ç–µ', '—É–±–∏–π—Å—Ç–≤–æ', '–æ–ø–∞—Å–Ω–æ—Å—Ç—å', '—É–∫—Ä–∞–ª–∏', '–≤–æ—Ä', '–ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ', '—Ç–µ–ª–µ—Ñ–æ–Ω', '–∫—Ä–∞–∂–∞', '–æ–≥—Ä–∞–±–∏–ª–∏', '–ø–æ—Ö–∏—Ç–∏–ª–∏', '–≤–∑—è–ª–∏', '—É–∫—Ä–∞–ª–∏ —Å–æ–±–∞–∫—É', '—É–∫—Ä–∞–ª–∏ –∫–æ—Ç–∞', '—É–∫—Ä–∞–ª–∏ —Å—É–º–∫—É', '—É–∫—Ä–∞–ª–∏ –¥–µ–Ω—å–≥–∏', '—É–∫—Ä–∞–ª–∏ –≤–µ–ª–æ—Å–∏–ø–µ–¥', '—É–∫—Ä–∞–ª–∏ –º–∞—à–∏–Ω—É', '–≤–∑—è–ª–∏ —é–±–∫—É', '—É–∫—Ä–∞–ª–∏ —Å—É–º–∫—É', '–≤–∑—è–ª–∏ –±–æ—Ç–∏–Ω–∫–∏', '—É–∫—Ä–∞–ª–∏ –∫–ª—é—á–∏', '–ø–æ—Ö–∏—Ç–∏–ª–∏ —á–µ–ª–æ–≤–µ–∫–∞', '–≤—ã–∫—É–ø', '–≥—É–±—ã –±—Ä–∞—Ç–∞ —É–∫—Ä–∞–ª–∏', '—Ç—Ä–µ–±—É—é—Ç –≤—ã–∫—É–ø', '–≤–µ—Ä–Ω—É—Ç—å –±—Ä–∞—Ç–∞', '–ø–æ—Ö–∏—Ç–∏–ª–∏ –±—Ä–∞—Ç–∞', '–º–æ–∏ –≥—É–±—ã –±—Ä–∞—Ç–∞ —É–∫—Ä–∞–ª–∏'], 
          reply: '–ú—ã —É–∂–µ –≤—ã–µ–∑–∂–∞–µ–º. –û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –Ω–∞ –º–µ—Å—Ç–µ.' },
        { keywords: ['—à—É—Ç–∫–∞', '–æ—Ç–º–µ–Ω–∞', '–Ω–∏—á–µ–≥–æ'], 
          reply: '–•–æ—Ä–æ—à–æ, –≤—ã–∑–æ–≤ –æ—Ç–º–µ–Ω—ë–Ω. –î–æ —Å–≤–∏–¥–∞–Ω–∏—è.', hangup: true },
        { keywords: ['–ø–æ–∂–∞—Ä', '–≥–æ—Ä–∏—Ç', '–æ–≥–æ–Ω—å'], 
          reply: '–ü–æ–∂–∞—Ä–Ω–∞—è —Å–ª—É–∂–±–∞ —É–∂–µ –≤ –ø—É—Ç–∏.' },
        { keywords: ['–∞–≤–∞—Ä–∏—è', '—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç', '–¥—Ç–ø'], 
          reply: '–°–∫–æ—Ä–∞—è –ø–æ–º–æ—â—å –≤—ã–µ—Ö–∞–ª–∞.' },
        { keywords: ['–Ω–∞—Å–∏–ª–∏–µ', '–¥—Ä–∞–∫–∞', '–ø—Ä–∏–∑—ã–≤'], 
          reply: '–ú—ã –Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –ø–∞—Ç—Ä—É–ª—å.' }
      ],
      defaultReply: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ.'
    },
    '666': {
      name: '–ì–æ–ª–æ—Å –∏–∑ –ø—Ä–µ–∏—Å–ø–æ–¥–Ω–µ–π',
      intro: '–¢—ã –ø–æ–∑–≤–æ–Ω–∏–ª –≤ –∞–¥...',
      responses: [
        { keywords: ['—Ç—ã', '–≥–¥–µ', '–∫—Ç–æ'], 
          reply: '–¢—ã –≤ –∞–¥—É. –ú—ã —É–∂–µ —Ä—è–¥–æ–º...', pitch: 0.4 },
        { keywords: ['–ø–æ–º–æ–≥–∏—Ç–µ', '—Å–ø–∞—Å—Ç–∏'], 
          reply: '–ù–∏–∫—Ç–æ –Ω–µ —É—Å–ª—ã—à–∏—Ç —Ç–≤–æ–π –∫—Ä–∏–∫...', pitch: 0.3 },
        { keywords: ['–≤—ã—Ö–æ–¥', '—Å–ø–∞—Å—Ç–∏'], 
          reply: '–í—ã—Ö–æ–¥–∞ –Ω–µ—Ç...', pitch: 0.2 },
        { keywords: ['–ø—Ä–∏–≤–µ—Ç'], 
          reply: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≤–µ—á–Ω–æ—Å—Ç—å...', pitch: 0.5 }
      ],
      defaultReply: '–¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª...', pitch: 0.3
    },
    '123': {
      name: '–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏',
      intro: '–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.',
      responses: [
        { keywords: ['–ø—Ä–æ–±–ª–µ–º–∞', '–æ—à–∏–±–∫–∞', '—Å–±–æ–π', '–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç', '–≤–∏—Ä—É—Å', '—Ö–∞–∫–∏–Ω–≥', '–∫–æ–º–ø—å—é—Ç–µ—Ä —Å–ª–æ–º–∞–ª—Å—è', '–∏–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–µ –ø–æ—à–µ–ª', '—Ç–µ–ª–µ—Ñ–æ–Ω –∑–∞–≤–∏—Å', '–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä—è–ª'], 
          reply: '–û–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ.' },
        { keywords: ['–ø–æ–º–æ–≥–∏—Ç–µ', '–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç'], 
          reply: '–ú—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ —ç—Ç–∏–º.' },
        { keywords: ['—Å–ø–∞—Å–∏–±–æ', '–±–ª–∞–≥–æ–¥–∞—Ä—é'], 
          reply: '–†–∞–¥—ã –ø–æ–º–æ—á—å!' }
      ],
      defaultReply: '–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –ø–æ–Ω—è–ª.'
    },
    '555': {
      name: '–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –≥–æ–ª–æ—Å',
      intro: '–¢—ã —É—Å–ª—ã—à–∞–ª —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≥–æ–ª–æ—Å...',
      responses: [
        { keywords: ['–ø—Ä–∏–≤–µ—Ç', '–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π'], 
          reply: '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è, —Å—Ç—Ä–∞–Ω–Ω–∏–∫.' },
        { keywords: ['—Ç–∞–π–Ω–∞', '—Å–µ–∫—Ä–µ—Ç'], 
          reply: '–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–π–Ω—ã –ª—É—á—à–µ –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å.' },
        { keywords: ['—Å—Ç—Ä–∞—Ö', '—É–∂–∞—Å'], 
          reply: '–°—Ç—Ä–∞—Ö ‚Äî –ª–∏—à—å —Ç–µ–Ω—å –≤ —Ç–≤–æ—ë–º —Ä–∞–∑—É–º–µ.' },
        { keywords: ['–ø–æ–º–æ–≥–∏—Ç–µ'], 
          reply: '–Ø –º–æ–≥—É –ª–∏—à—å –Ω–∞–±–ª—é–¥–∞—Ç—å.' }
      ],
      defaultReply: '–ú–æ–ª—á–∞–Ω–∏–µ ‚Äî —Ç–æ–∂–µ –æ—Ç–≤–µ—Ç.'
    },
    '000': {
      name: '–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫',
      intro: '–û—Å—Ç–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.',
      responses: [],
      defaultReply: '–ë–∏–ø... –ë–∏–ø...'
    }
  };

  // –ò—â–µ–º –æ—Ç–≤–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
  function findResponse(character, userText) {
    userText = userText.toLowerCase();
    for (const resp of character.responses) {
      for (const kw of resp.keywords) {
        if (userText.includes(kw)) {
          return resp;
        }
      }
    }
    return null;
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
  voiceInputBtn.onclick = () => {
    if (listening) {
      stopVoiceInput();
      return;
    }

    if (!('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) || !(window.AudioContext || window.webkitAudioContext)) {
      log('–ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥.');
      return;
    }

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SpeechRecognition();
    recognition.lang = 'ru-RU';
    recognition.continuous = false;
    recognition.interimResults = false;

    recognition.onstart = () => {
      listening = true;
      voiceInputBtn.textContent = '‚èπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω';
      voiceInputBtn.style.background = '#daa';
      log('üé§ –°–ª—É—à–∞—é...');
    };

    recognition.onresult = (event) => {
      const transcript = event.results[0][0].transcript;
      if (transcript.trim()) {
        userInput.value += transcript + ' ';
        log('–†–∞—Å–ø–æ–∑–Ω–∞–Ω–æ: ' + transcript);
      }
    };

    recognition.onerror = (event) => {
      log('–û—à–∏–±–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞: ' + event.error);
      stopVoiceInput();
    };

    recognition.onend = () => {
      stopVoiceInput();
    };

    try {
      navigator.mediaDevices.getUserMedia({ audio: true }).then(() => {
        recognition.start();
      }).catch((err) => {
        log('–î–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω. –†–∞–∑—Ä–µ—à–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞.');
      });
    } catch (err) {
      recognition.start();
    }
  };

  function stopVoiceInput() {
    listening = false;
    voiceInputBtn.textContent = 'üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥';
    voiceInputBtn.style.background = '';
    if (recognition) {
      recognition.stop();
    }
  }

  callBtn.onclick = async () => {
    if (state !== 'idle') return;

    currentNumber = numberInput.value.trim();
    if (!currentNumber) {
      alert('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä!');
      return;
    }

    state = 'calling';

    callBtn.classList.add('hidden');
    hangupBtn.classList.remove('hidden');
    chatContainer.classList.remove('hidden');
    numberInput.disabled = true;
    screenDiv.innerHTML = '<b>–ó–≤–æ–Ω–∏–º –Ω–∞ ' + currentNumber + '...</b>';
    log('–°–≤—è–∑—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –ü–∏—à–∏—Ç–µ –∏–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç–µ.');

    await new Promise(r => setTimeout(r, 1500));

    const character = characters[currentNumber];
    if (character) {
      speak(character.intro, { speaker: character.name, pitch: 0.6 });
    } else {
      speak('–ê–±–æ–Ω–µ–Ω—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∏–ª–∏ –Ω–æ–º–µ—Ä –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.', { speaker: '–°–∏—Å—Ç–µ–º–∞' });
    }
  };

  sendBtn.onclick = () => {
    if (state !== 'calling' || listening) return;

    const userMessage = userInput.value.trim();
    if (!userMessage) {
      alert('–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!');
      return;
    }

    log('<b>–í—ã:</b> ' + userMessage);
    userInput.value = '';

    const character = characters[currentNumber];
    if (!character) {
      speak('–ê–±–æ–Ω–µ–Ω—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç.', { speaker: '–°–∏—Å—Ç–µ–º–∞' });
      return;
    }

    const response = findResponse(character, userMessage);
    if (response) {
      speak(response.reply, { speaker: character.name, pitch: response.pitch || 0.6 });
      if (response.hangup) {
        setTimeout(() => hangupBtn.click(), 3000);
      }
    } else {
      speak(character.defaultReply, { speaker: character.name, pitch: character.pitch || 0.6 });
    }
  };

  hangupBtn.onclick = () => {
    if (state === 'idle') return;

    stopVoiceInput();

    state = 'idle';
    currentNumber = '';
    callBtn.classList.remove('hidden');
    hangupBtn.classList.add('hidden');
    chatContainer.classList.add('hidden');
    numberInput.disabled = false;
    userInput.value = '';
    log('<b>–í—ã–∑–æ–≤ –∑–∞–≤–µ—Ä—à—ë–Ω.</b>');
  };


							</script>
                        </body>
                        </html>
                    